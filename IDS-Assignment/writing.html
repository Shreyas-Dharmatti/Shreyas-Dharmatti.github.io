<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.23">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Shreyas Dharmatti, Kanika Dixit, Kushgra Gupta">

<title>IDS Writing Assignment</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="writing_files/libs/clipboard/clipboard.min.js"></script>
<script src="writing_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="writing_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="writing_files/libs/quarto-html/popper.min.js"></script>
<script src="writing_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="writing_files/libs/quarto-html/anchor.min.js"></script>
<link href="writing_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="writing_files/libs/quarto-html/quarto-syntax-highlighting-226bd0f977fa82dfae4534cac220d79a.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="writing_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="writing_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="writing_files/libs/bootstrap/bootstrap-be9206a58a27969b3ea3001da8f26fef.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">IDS Writing Assignment</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Shreyas Dharmatti, Kanika Dixit, Kushgra Gupta </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">21 April, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<!-- ## 📑 Index

- [Test-1](#test-1)
-  -->
<style>
body {
  background-color: white; /* light blue background */
  font-family: "Segoe UI", sans-serif;
}

h1, h2, h3 {
  color: #333;
}

code {
  background-color: #e6e6e6;
  padding: 2px 4px;
  border-radius: 4px;
}
</style>
<p><a href="https://shreyas-dharmatti.github.io/IDS-Assignment/writing.html">Writing Assignment Web Page</a></p>
<p><a href="https://github.com/Shreyas-Dharmatti/Shreyas-Dharmatti.github.io">Writing Assignment Git Page</a></p>
<p>The dataset contains electricity usage data for various Indian states, recorded across different dates. Each row represents a state’s usage at a specific timestamp, along with its geographical coordinates (latitude and longitude) and its corresponding region (like NR for North Region). The dataset includes 16,599 entries across 6 columns. The Usage column holds the power consumption values, while the Dates column indicates the timestamp in DD/MM/YYYY HH:MM:SS format.</p>
<p>Data is in the form of a time series for a period of 17 months beginning from 2nd Jan 2019 till 23rd May 2020.</p>
<p>Below is the first 10 samples from the dataset.</p>
<div id="cell-8" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2025-04-13T13:02:26.116673Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-04-13T13:02:26.116190Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-04-13T13:02:26.153521Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-04-13T13:02:26.151976Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2025-04-13T13:02:26.116640Z&quot;}}" data-trusted="true" data-execution_count="40">
<div class="cell-output cell-output-display" data-execution_count="40">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">States</th>
<th data-quarto-table-cell-role="th">Regions</th>
<th data-quarto-table-cell-role="th">latitude</th>
<th data-quarto-table-cell-role="th">longitude</th>
<th data-quarto-table-cell-role="th">Dates</th>
<th data-quarto-table-cell-role="th">Usage</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Punjab</td>
<td>NR</td>
<td>31.519974</td>
<td>75.980003</td>
<td>02/01/2019 00:00:00</td>
<td>119.9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Haryana</td>
<td>NR</td>
<td>28.450006</td>
<td>77.019991</td>
<td>02/01/2019 00:00:00</td>
<td>130.3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Rajasthan</td>
<td>NR</td>
<td>26.449999</td>
<td>74.639981</td>
<td>02/01/2019 00:00:00</td>
<td>234.1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Delhi</td>
<td>NR</td>
<td>28.669993</td>
<td>77.230004</td>
<td>02/01/2019 00:00:00</td>
<td>85.8</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>UP</td>
<td>NR</td>
<td>27.599981</td>
<td>78.050006</td>
<td>02/01/2019 00:00:00</td>
<td>313.9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>Uttarakhand</td>
<td>NR</td>
<td>30.320409</td>
<td>78.050006</td>
<td>02/01/2019 00:00:00</td>
<td>40.7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>HP</td>
<td>NR</td>
<td>31.100025</td>
<td>77.166597</td>
<td>02/01/2019 00:00:00</td>
<td>30.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>J&amp;K</td>
<td>NR</td>
<td>33.450000</td>
<td>76.240000</td>
<td>02/01/2019 00:00:00</td>
<td>52.5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>Chandigarh</td>
<td>NR</td>
<td>30.719997</td>
<td>76.780006</td>
<td>02/01/2019 00:00:00</td>
<td>5.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>Chhattisgarh</td>
<td>WR</td>
<td>22.090420</td>
<td>82.159987</td>
<td>02/01/2019 00:00:00</td>
<td>78.7</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-9" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2025-04-13T13:02:26.175894Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-04-13T13:02:26.175467Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-04-13T13:02:26.197630Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-04-13T13:02:26.196412Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2025-04-13T13:02:26.175846Z&quot;}}" data-trusted="true" data-execution_count="41">
<div class="cell-output cell-output-stdout">
<pre><code>Number of Null Values in all the corresponding columns:
</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="41">
<pre><code>States       0
Regions      0
latitude     0
longitude    0
Dates        0
Usage        0
dtype: int64</code></pre>
</div>
</div>
<section id="univariate-analysis" class="level3">
<h3 class="anchored" data-anchor-id="univariate-analysis">Univariate Analysis</h3>
<p>Lets look at data distribution across all the 33 states present in the dataset</p>
<div id="cell-13" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2025-04-13T13:02:26.252807Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-04-13T13:02:26.252502Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-04-13T13:02:26.694894Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-04-13T13:02:26.693700Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2025-04-13T13:02:26.252780Z&quot;}}" data-trusted="true" data-execution_count="43">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="writing_files/figure-html/cell-7-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Data is distributed evenly across all the states we consider in India.</p>
<hr>
<p>Now, lets look at the data distribution across the 5 regions</p>
<div id="cell-16" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2025-04-13T13:02:26.696604Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-04-13T13:02:26.696243Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-04-13T13:02:26.841528Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-04-13T13:02:26.840218Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2025-04-13T13:02:26.696570Z&quot;}}" data-trusted="true" data-execution_count="44">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="writing_files/figure-html/cell-8-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Data is not evenly distributed when we look at the regions, as regions are composed of different states, so the number of states in each region being different causes the distribution to be uneven.</p>
<hr>
<p>As mentioned above lets focus on how many states are present in each region</p>
<div id="cell-19" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2025-04-13T13:02:26.843226Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-04-13T13:02:26.842812Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-04-13T13:02:27.082901Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-04-13T13:02:27.081856Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2025-04-13T13:02:26.843187Z&quot;}}" data-trusted="true" data-execution_count="45">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="writing_files/figure-html/cell-9-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>The number of region having more states, naturally have more data percentagewise</p>
<hr>
<p>Following are stats for the <strong>Usage</strong> columns in the dataset</p>
<div id="cell-22" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2025-04-13T13:02:27.084348Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-04-13T13:02:27.083835Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-04-13T13:02:27.104738Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-04-13T13:02:27.100826Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2025-04-13T13:02:27.084315Z&quot;}}" data-trusted="true" data-execution_count="46">
<div class="cell-output cell-output-display" data-execution_count="46">
<pre><code>count    16587.000000
mean       103.072539
std        116.056017
min          0.300000
25%          6.700000
50%         64.600000
75%        174.000000
max        522.100000
Name: Usage, dtype: float64</code></pre>
</div>
</div>
<div id="cell-23" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2025-04-13T13:02:27.106447Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-04-13T13:02:27.105833Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-04-13T13:02:27.299891Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-04-13T13:02:27.298580Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2025-04-13T13:02:27.106313Z&quot;}}" data-trusted="true" data-execution_count="47">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="writing_files/figure-html/cell-11-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<hr>
<div id="cell-25" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2025-04-13T13:02:27.309212Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-04-13T13:02:27.308861Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-04-13T13:02:27.342830Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-04-13T13:02:27.341727Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2025-04-13T13:02:27.309184Z&quot;}}" data-trusted="true" data-execution_count="48">
<div class="cell-output cell-output-stdout">
<pre><code>Data start date: 2019-01-02 00:00:00
Data ends end: 2020-12-05 00:00:00
Total days for which data is logged: 703 days 00:00:00</code></pre>
</div>
</div>
<p>The total time period(2019-01 to 2020-12) mentioned is more than 703 days, which means that there are some days missing for which no data has been logged, we will look at this in detail later</p>
<hr>
</section>
<section id="bivariate-analysis" class="level3">
<h3 class="anchored" data-anchor-id="bivariate-analysis">Bivariate Analysis</h3>
<p>Now lets focus on average usage according to regions (as mentioned before)</p>
<div id="cell-29" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2025-04-13T13:02:27.344387Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-04-13T13:02:27.343980Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-04-13T13:02:27.600208Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-04-13T13:02:27.599196Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2025-04-13T13:02:27.344330Z&quot;}}" data-trusted="true" data-execution_count="49">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="writing_files/figure-html/cell-13-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>We can see here that the West region consumes max power supply while Northeast region consumes least which can be explained as the no. of states comprising these regions have the same pattern i.e.&nbsp;no. of states in WR is more than the NER, hence more popluation than the NER.</p>
<hr>
<p>Next, we will see on average power usage for each state</p>
<div id="cell-32" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2025-04-13T13:02:27.601549Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-04-13T13:02:27.601183Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-04-13T13:02:27.614137Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-04-13T13:02:27.612867Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2025-04-13T13:02:27.601517Z&quot;}}" data-trusted="true" data-execution_count="50">
<div class="cell-output cell-output-display" data-execution_count="50">
<pre><code>States
Maharashtra          431.570179
Gujarat              323.039563
UP                   314.036382
Tamil Nadu           300.738569
Rajasthan            218.443340
MP                   208.283101
Karnataka            204.106759
Telangana            187.008549
Andhra Pradesh       176.151889
Punjab               141.145527
West Bengal          138.708151
Haryana              138.333598
Chhattisgarh          83.877137
Delhi                 83.380716
Bihar                 83.159443
Odisha                80.464612
Kerala                72.192445
J&amp;K                   44.264016
Uttarakhand           36.161155
HP                    26.568191
Assam                 24.960040
Jharkhand             23.842545
DNH                   16.430616
Goa                   11.093241
Pondy                  7.473108
Meghalaya              5.646813
Chandigarh             4.141551
Tripura                4.089022
Manipur                2.494632
Nagaland               2.163273
Arunachal Pradesh      2.110579
Mizoram                1.707585
Sikkim                 1.289044
Name: Usage, dtype: float64</code></pre>
</div>
</div>
<p>Throughout India we can see a huge variation in the power usage across states, from 431 units down to 1.28 units, tell us a lot about the diversity in India.</p>
<p>Power usage is in a way directly proportional to population, industrialisation, government policies, climate in that region, etc. This in many way tells us the diversity in India in all aspects of life.</p>
<hr>
<p>Lets look at the mean usage of each state with thier locations on the map</p>
<div id="cell-35" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2025-04-13T13:02:27.615449Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-04-13T13:02:27.615124Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-04-13T13:02:28.405920Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-04-13T13:02:28.404697Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2025-04-13T13:02:27.615422Z&quot;}}" data-trusted="true" data-execution_count="51">
<div class="cell-output cell-output-display">
<iframe scrolling="no" width="100%" height="545px" src="iframe_figures/figure_51.html" frameborder="0" allowfullscreen=""></iframe>
</div>
</div>
<p>This is just a nice visualisation to know geographically where each state lies, and what their average power usage is.</p>
<hr>
<p>Let focus on top 10 states which consume maximum energy</p>
<div id="cell-38" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2025-04-13T13:02:28.407667Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-04-13T13:02:28.407304Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-04-13T13:02:28.718105Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-04-13T13:02:28.716865Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2025-04-13T13:02:28.407637Z&quot;}}" data-trusted="true" data-execution_count="52">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="writing_files/figure-html/cell-16-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Here we can see the top 10 states having highest mean power usage. Quite interestingly the states with most population, and most industrialisation seems to be in the list.</p>
<hr>
<p>Now lets look at India as a whole and see how the mean usage varied throughtout the entire period</p>
<div id="cell-41" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2025-04-13T13:02:28.719536Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-04-13T13:02:28.719176Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-04-13T13:02:29.102043Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-04-13T13:02:29.100647Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2025-04-13T13:02:28.719504Z&quot;}}" data-trusted="true" data-execution_count="53">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="writing_files/figure-html/cell-17-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>The inconsistencies in the data post the 4/5 month in 2020, is due to the fact that we have comparatively very less numbers of entry for those time beings, thus making the graph look the way it does.</p>
<hr>
<div id="cell-43" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2025-04-13T13:02:29.113645Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-04-13T13:02:29.113297Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-04-13T13:02:29.230707Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-04-13T13:02:29.229174Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2025-04-13T13:02:29.113616Z&quot;}}" data-trusted="true" data-execution_count="54">
<div class="cell-output cell-output-display">
<iframe scrolling="no" width="100%" height="545px" src="iframe_figures/figure_54.html" frameborder="0" allowfullscreen=""></iframe>
</div>
</div>
<p>This tells us the overall mean usage across India for all the months mentioned in the dataset.</p>
<hr>
<p>Lets now look at the correlation matrix for usage latitude and longitude</p>
<div id="cell-46" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2025-04-13T13:02:29.232272Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-04-13T13:02:29.231924Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-04-13T13:02:30.160184Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-04-13T13:02:30.158888Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2025-04-13T13:02:29.232241Z&quot;}}" data-trusted="true" data-execution_count="55">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="writing_files/figure-html/cell-19-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>No heavy correlation between columns, there is a slight negative correlation between usage and longitude, and a very less negative correlation betwee latitude and usage.</p>
<hr>
<p>Now let us look at if there are any outliers present in the usage column, and if then in which states</p>
<div id="cell-49" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2025-04-13T13:02:30.161836Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-04-13T13:02:30.161249Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-04-13T13:02:30.178315Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-04-13T13:02:30.177116Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2025-04-13T13:02:30.161804Z&quot;}}" data-trusted="true" data-execution_count="56">
<div class="cell-output cell-output-stdout">
<pre><code>            States  Usage
5424   Maharashtra  522.1
1662   Maharashtra  516.4
1695   Maharashtra  515.8
5391   Maharashtra  513.9
5358   Maharashtra  513.6
...            ...    ...
15679           UP  425.6
3873   Maharashtra  425.5
13575  Maharashtra  425.1
7066            UP  425.1
6744   Maharashtra  425.1

[314 rows x 2 columns]
['Maharashtra' 'UP']</code></pre>
</div>
</div>
<p>From the above analysis we can cleary see that there exist around 314 outliers, but the interesting point is that they exist only in Maharashtra and UP, and the outlier values are high. this can due to fact that the population is very high in both these states, thus having high values of usage is quite justified compared to the other values</p>
<hr>
<div id="cell-51" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2025-04-13T13:02:30.189325Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-04-13T13:02:30.188911Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-04-13T13:02:30.265561Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-04-13T13:02:30.264275Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2025-04-13T13:02:30.189283Z&quot;}}" data-trusted="true" data-execution_count="57">
<div class="cell-output cell-output-stdout">
<pre><code>Monthly Usage Statistics (Grouped by State and Month):

count    792.000000
mean     103.845091
std      115.037608
min        1.031818
25%        7.216190
50%       70.458333
75%      176.917403
max      488.940000
Name: Usage, dtype: float64</code></pre>
</div>
</div>
<div id="cell-52" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2025-04-13T13:05:23.221732Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-04-13T13:05:23.221180Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-04-13T13:05:23.622279Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-04-13T13:05:23.620960Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2025-04-13T13:05:23.221679Z&quot;}}" data-trusted="true" data-execution_count="62">
<div class="cell-output cell-output-display">
<iframe scrolling="no" width="100%" height="545px" src="iframe_figures/figure_62.html" frameborder="0" allowfullscreen=""></iframe>
</div>
</div>
<p>This can be used as a comparative graph, wherein one can select/deselet any states it wants to look at together to compare any states</p>
<hr>
<div id="cell-54" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2025-04-13T13:05:23.624587Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-04-13T13:05:23.624158Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-04-13T13:05:23.642069Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-04-13T13:05:23.640262Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2025-04-13T13:05:23.624551Z&quot;}}" data-trusted="true" data-execution_count="61">
<div class="cell-output cell-output-stdout">
<pre><code>Entries before 1 Jan 2020: 11835
Entries on or after 1 Jan 2020: 4752</code></pre>
</div>
</div>
<hr>
<div id="cell-57" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;execution&quot;,&quot;value&quot;:{&quot;iopub.execute_input&quot;:&quot;2025-04-13T13:05:30.452316Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-04-13T13:05:30.452010Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-04-13T13:05:30.580422Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-04-13T13:05:30.579218Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2025-04-13T13:05:30.452276Z&quot;}}" data-trusted="true" data-execution_count="60">
<div class="cell-output cell-output-display">
<iframe scrolling="no" width="100%" height="520" src="iframe_figures/figure_60.html" frameborder="0" allowfullscreen=""></iframe>
</div>
</div>
<p>The graph above will help us look at mean usage monthwise throughout the time period. We dont have same number of entries for all months, hence the mean would be a good metric to compare. We can select any of the states here and check their usage.</p>
<hr>
<p><strong>Next we try to see the seasonal variation in usage in India using the ANOVA Test</strong></p>
<p>Objective The goal of this analysis is to determine if there is a <strong>statistically significant difference</strong> in electricity usage across different seasons in India.</p>
<p>In here we are assuming the four seasons, as it is widely well known in India:</p>
<p><strong>Winter</strong>: Decemeber, January, February</p>
<p><strong>Summer</strong>: March, April, May</p>
<p><strong>Monsoon</strong>: June, July, August</p>
<p><strong>Post-Monsoon</strong>: September, October, Novemeber.</p>
<p>This is a generalisation of seasons, of course there are places in India, wherein, maybe the mentioned seasonal variation is not followed, but as a whole for India, this is a good way to divide the seasons.</p>
<p>We will be testing the following hypotheses using <strong>One-Way ANOVA</strong>:</p>
<p><strong>Null Hypothesis (H₀)</strong>: Mean electricity usage is the same across all seasons.</p>
<p><strong>Alternative Hypothesis (H₁)</strong>: At least one season has a different mean electricity usage.</p>
<p><em>(We would be using a p-value of 0.05)</em></p>
<div id="cell-60" class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>ANOVA Test Result:
F-statistic: 0.1816
p-value: 0.9090</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="writing_files/figure-html/cell-26-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="writing_files/figure-html/cell-26-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="test-output" class="level3">
<h3 class="anchored" data-anchor-id="test-output">Test Output:</h3>
<ul>
<li><strong>F-statistic</strong>: 0.1816 (Ratio of variance between group means to variance within the groups)</li>
<li><strong>p-value</strong>: 0.9090 (Probability that the observed differences could have occurred by chance under the null hypothesis.)</li>
</ul>
</section>
<section id="conclusion" class="level3">
<h3 class="anchored" data-anchor-id="conclusion">Conclusion:</h3>
<ul>
<li>If <em>p-value &lt; 0.05</em>: Reject the null hypothesis ⇒ electricity usage <em>does</em> vary by season.</li>
<li>If <em>p-value ≥ 0.05</em>: Fail to reject the null hypothesis ⇒ no significant seasonal variation in usage.</li>
</ul>
<p><strong>Since our p-value is very high compared to 0.05 we fail to reject the null hypothesis. There is no significant variation in usage as seasons change in India</strong></p>
<hr>
<p><strong>Next we determine if there’s a statistically significant difference in power usage between weekdays and weekends using t-test</strong></p>
<p>We will be testing the following hypotheses using <strong>T-test</strong>:</p>
<p><strong>Null Hypothesis (H₀):</strong> Average power usage on weekdays equals weekends.<br>
<strong>Alternative Hypothesis (H₁):</strong> Average power usage differs between weekdays and weekends.</p>
<p><em>(We would be using a p-value of 0.05)</em></p>
<div id="cell-63" class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>T-Test Result (Weekday vs Weekend):
T-statistic: -0.0068
P-value: 0.9945</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="writing_files/figure-html/cell-27-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="writing_files/figure-html/cell-27-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="test-output-1" class="level3">
<h3 class="anchored" data-anchor-id="test-output-1">Test Output:</h3>
<ul>
<li><strong>T-statistic</strong>: -0.0068</li>
<li><strong>p-value</strong>: 0.9945</li>
</ul>
</section>
<section id="conclusion-1" class="level3">
<h3 class="anchored" data-anchor-id="conclusion-1">Conclusion:</h3>
<ul>
<li>If <em>p-value &lt; 0.05</em>: Reject the null hypothesis ⇒ electricity usage is same on the weekday and weekend.</li>
<li>If <em>p-value ≥ 0.05</em>: Fail to reject the null hypothesis ⇒ No statistically significant difference found between weekday and weekend usage</li>
</ul>
<p><strong>Since our p-value is very high compared to 0.05 we fail to reject the null hypothesis. There is no significant difference in weekday and weekend usage</strong></p>
<hr>
<p><strong>Next we determine if there’s a statistically significant difference in power usage across different regions using ANOVA</strong></p>
<p>We will be testing the following hypotheses using <strong>One-way ANOVA</strong>:</p>
<p><strong>Null Hypothesis (H₀):</strong> Average power usage is the same across all regions.<br>
<strong>Alternative Hypothesis (H₁):</strong> Average power usage differs between at least two regions.</p>
<p><em>(We would be using a p-value of 0.05)</em></p>
<div id="cell-66" class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Regional Statistics:
               mean         std  count
Regions                               
ER        65.492843   50.750027   2515
NER        6.165976    7.994403   3521
NR       111.830042  102.426873   4527
SR       157.945195   97.512207   3018
WR       179.048973  159.931286   3018

ANOVA Test Result (Usage across Regions):
F-statistic: 1645.3150
P-value: 0.0000</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="writing_files/figure-html/cell-28-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="writing_files/figure-html/cell-28-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-67" class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Tukey's HSD Results:
 Multiple Comparison of Means - Tukey HSD, FWER=0.05 
=====================================================
group1 group2 meandiff p-adj  lower    upper   reject
-----------------------------------------------------
    ER    NER -59.3269   0.0 -66.3215 -52.3322   True
    ER     NR  46.3372   0.0  39.6742  53.0002   True
    ER     SR  92.4524   0.0  85.2189  99.6858   True
    ER     WR 113.5561   0.0 106.3227 120.7896   True
   NER     NR 105.6641   0.0   99.644 111.6841   True
   NER     SR 151.7792   0.0 145.1333 158.4252   True
   NER     WR  172.883   0.0  166.237  179.529   True
    NR     SR  46.1152   0.0  39.8192  52.4111   True
    NR     WR  67.2189   0.0   60.923  73.5149   True
    SR     WR  21.1038   0.0  14.2069  28.0006   True
-----------------------------------------------------</code></pre>
</div>
</div>
</section>
<section id="test-output-2" class="level3">
<h3 class="anchored" data-anchor-id="test-output-2">Test Output:</h3>
<ul>
<li><strong>F-statistic</strong>: 1645.3150</li>
<li><strong>p-value</strong>: 0.0000</li>
</ul>
</section>
<section id="conclusion-2" class="level3">
<h3 class="anchored" data-anchor-id="conclusion-2">Conclusion:</h3>
<ul>
<li>If <em>p-value &lt; 0.05</em>: Reject the null hypothesis ⇒ Significant differences exist between regions.</li>
<li>If <em>p-value ≥ 0.05</em>: Fail to reject the null hypothesis ⇒ No statistically significant difference between regions.</li>
</ul>
<p><strong>Since our p-value is much lower than 0.05, we reject the null hypothesis.<br>
There is a statistically significant difference in electricity usage across different regions. We can also see that for every region there is a statistical difference from each other, goes on to say that no two regions have the same mean power usage</strong></p>
<hr>
<p><strong>Next we determine if there’s a statistically significant difference in power usage between two specific periods using an Independent Two-Sample t-test</strong></p>
<p>We will be testing the following hypotheses using <strong>Two-sample t-test</strong>:</p>
<p><strong>Null Hypothesis (H₀):</strong> There is no difference in average power usage between the two periods.<br>
<strong>Alternative Hypothesis (H₁):</strong> There is a difference in average power usage between the two periods.</p>
<p><em>(We would be using a p-value threshold of 0.05)</em></p>
<div id="cell-70" class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Lockdown Period Statistics (2020) vs Non-lockdown Period (2019):

2020 Lockdown Period:
count    2079.000000
mean      100.439490
std       113.730868
min         0.800000
25%         6.700000
50%        64.200000
75%       169.950000
max       500.400000
Name: Usage, dtype: float64

2019 Non-lockdown Period:
count    8910.000000
mean      102.299989
std       115.232474
min         0.500000
25%         6.600000
50%        64.350000
75%       172.200000
max       522.100000
Name: Usage, dtype: float64

T-Test Result (2020 Lockdown vs 2019 Non-lockdown Usage):
T-statistic: -0.6700
P-value: 0.5029</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="writing_files/figure-html/cell-30-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="writing_files/figure-html/cell-30-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="test-output-3" class="level3">
<h3 class="anchored" data-anchor-id="test-output-3">Test Output:</h3>
<ul>
<li><strong>T-statistic</strong>: -0.6700<br>
</li>
<li><strong>p-value</strong>: 0.5029</li>
</ul>
</section>
<section id="conclusion-3" class="level3">
<h3 class="anchored" data-anchor-id="conclusion-3">Conclusion:</h3>
<ul>
<li>If <em>p-value &lt; 0.05</em>: Reject the null hypothesis ⇒ Significant difference exists between the periods.</li>
<li>If <em>p-value ≥ 0.05</em>: Fail to reject the null hypothesis ⇒ No statistically significant difference between the periods.</li>
</ul>
<p><strong>Since our p-value is greater than 0.05, we fail to reject the null hypothesis.<br>
There is no statistically significant difference in electricity usage between the two periods. This indicates that, on average, the usage levels are similar across these periods.</strong></p>
<hr>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>